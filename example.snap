#!/usr/bin/env snaprotate

policy = recent <||> weekly <||> monthly

recent = (keepLastWithinDuration twodays) <?> "keep last 48h"
weekly = keepOnePerWeekLast4Weeks <?> "one per week, last month"
monthly =  keepOnePerMonth <?> "one per month, forever"

twodays = 2 <*> day
week = 7 <*> day

keepOnePerMonth = keepOneEvery month

keepOnePerWeekLast4Weeks = keepOnePerWeek <&&> keepLast4Weeks

keepOnePerWeek = keepOneEvery week
keepLast4Weeks = keepLastWithinDuration month


